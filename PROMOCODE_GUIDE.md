# üéüÔ∏è –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–∏—Å—Ç–µ–º–µ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤

## üìã –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å–∫–∏–¥–∫–∏ –∏ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –º–µ—Å—è—Ü—ã –ø–æ–¥–ø–∏—Å–∫–∏. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è 3 —Ç–∏–ø–∞ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤:

### üéØ –¢–∏–ø—ã –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤

1. **`percentage`** - —Å–∫–∏–¥–∫–∞ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö
   - –ü—Ä–∏–º–µ—Ä: `WELCOME10` –¥–∞–µ—Ç 10% —Å–∫–∏–¥–∫—É
   - –¶–µ–Ω–∞ 1000‚ÇΩ ‚Üí 900‚ÇΩ

2. **`fixed_amount`** - —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∫–∏–¥–∫–∞ –≤ —Ä—É–±–ª—è—Ö
   - –ü—Ä–∏–º–µ—Ä: `SAVE500` –¥–∞–µ—Ç —Å–∫–∏–¥–∫—É 500‚ÇΩ
   - –¶–µ–Ω–∞ 1000‚ÇΩ ‚Üí 500‚ÇΩ

3. **`free_months`** - –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –º–µ—Å—è—Ü—ã
   - –ü—Ä–∏–º–µ—Ä: `FREE3MONTHS` –¥–∞–µ—Ç 3 –º–µ—Å—è—Ü–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–æ
   - –ü–æ–¥–ø–∏—Å–∫–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–µ–∑ –æ–ø–ª–∞—Ç—ã

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –ø–æ–ø–∞–ø —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è**
2. **–ù–∞–∂–º–∏—Ç–µ "–£–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–¥–ø–∏—Å–∫–æ–π"**
3. **–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥ –≤ –ø–æ–ª–µ "–ü—Ä–æ–º–æ–∫–æ–¥ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"**
4. **–ù–∞–∂–º–∏—Ç–µ "–ü—Ä–∏–º–µ–Ω–∏—Ç—å"**
5. **–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ** - —Ü–µ–Ω–∞ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å—á–∏—Ç–∞–Ω–∞ —Å —É—á–µ—Ç–æ–º —Å–∫–∏–¥–∫–∏

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:

#### –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞:
```sql
INSERT INTO promocodes (code, name, description, type, value, usage_limit) VALUES
('NEWYEAR2024', '–ù–æ–≤–æ–≥–æ–¥–Ω—è—è —Å–∫–∏–¥–∫–∞', '–°–∫–∏–¥–∫–∞ 25% –Ω–∞ –≤—Å–µ —Ç–∞—Ä–∏—Ñ—ã', 'percentage', 25, 100);
```

#### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:
```sql
SELECT 
    code,
    name,
    type,
    value,
    used_count,
    usage_limit,
    CASE 
        WHEN usage_limit IS NULL THEN '–ë–µ—Å—Å—Ä–æ—á–Ω–æ'
        ELSE ROUND((used_count::DECIMAL / usage_limit) * 100, 2) || '%'
    END as usage_percentage
FROM promocodes 
WHERE is_active = TRUE
ORDER BY used_count DESC;
```

## üìä –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤

### –ì–æ—Ç–æ–≤—ã–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã –≤ —Å–∏—Å—Ç–µ–º–µ:

- **`WELCOME10`** - —Å–∫–∏–¥–∫–∞ 10% (100 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π)
- **`SAVE500`** - —Å–∫–∏–¥–∫–∞ 500‚ÇΩ (50 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π)  
- **`FREE3MONTHS`** - 3 –º–µ—Å—è—Ü–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–æ (20 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π)
- **`STUDENT50`** - —Å–∫–∏–¥–∫–∞ 50% (200 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π)

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§—É–Ω–∫—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

- **`apply_promocode()`** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞
- **`apply_promocode_to_subscription()`** - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ —Å –ø—Ä–æ–º–æ–∫–æ–¥–æ–º
- **`assign_subscription_manually()`** - —Ä—É—á–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:

- ‚úÖ **RLS –ø–æ–ª–∏—Ç–∏–∫–∏** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** - –æ–¥–∏–Ω –ø—Ä–æ–º–æ–∫–æ–¥ = –æ–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- ‚úÖ **–õ–∏–º–∏—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** - –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ **–í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏** - –ø—Ä–æ–º–æ–∫–æ–¥—ã —Å –¥–∞—Ç–æ–π –∏—Å—Ç–µ—á–µ–Ω–∏—è

## üé® UI/UX

### –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:

- **–ü–æ–ª–µ –≤–≤–æ–¥–∞** - –¥–ª—è –≤–≤–æ–¥–∞ –ø—Ä–æ–º–æ–∫–æ–¥–∞
- **–ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏–º–µ–Ω–∏—Ç—å"** - –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–º–æ–∫–æ–¥–∞
- **–°–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ** - –∑–µ–ª–µ–Ω—ã–µ —Å –≥–∞–ª–æ—á–∫–æ–π ‚úì
- **–°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ** - –∫—Ä–∞—Å–Ω—ã–µ —Å –∫—Ä–µ—Å—Ç–∏–∫–æ–º ‚úó
- **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ü–µ–Ω—ã** - –∑–∞—á–µ—Ä–∫–Ω—É—Ç–∞—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ + –Ω–æ–≤–∞—è —Ü–µ–Ω–∞

### –°–æ—Å—Ç–æ—è–Ω–∏—è:

1. **–ü—Ä–æ–º–æ–∫–æ–¥ –Ω–µ –≤–≤–µ–¥–µ–Ω** - –ø–æ–ª–µ –ø—É—Å—Ç–æ–µ, –∫–Ω–æ–ø–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞
2. **–ü—Ä–æ–º–æ–∫–æ–¥ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è** - –∫–Ω–æ–ø–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "..."
3. **–ü—Ä–æ–º–æ–∫–æ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω** - –∑–µ–ª–µ–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –¥–µ—Ç–∞–ª—è–º–∏ —Å–∫–∏–¥–∫–∏
4. **–ü—Ä–æ–º–æ–∫–æ–¥ –Ω–µ–≤–µ—Ä–Ω—ã–π** - –∫—Ä–∞—Å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –æ—à–∏–±–∫–æ–π

## üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏:

- **"–ü—Ä–æ–º–æ–∫–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω"** - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–¥
- **"–ü—Ä–æ–º–æ–∫–æ–¥ –∏—Å—á–µ—Ä–ø–∞–Ω"** - –¥–æ—Å—Ç–∏–≥–Ω—É—Ç –ª–∏–º–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π
- **"–í—ã —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —ç—Ç–æ—Ç –ø—Ä–æ–º–æ–∫–æ–¥"** - –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- **"–ü—Ä–æ–º–æ–∫–æ–¥ –∏—Å—Ç–µ–∫"** - –ø—Ä–µ–≤—ã—à–µ–Ω–∞ –¥–∞—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü–æ–ª–µ–∑–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:

```sql
-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø—Ä–æ–º–æ–∫–æ–¥–∞–º
SELECT code, used_count, usage_limit FROM promocodes WHERE is_active = TRUE;

-- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
SELECT p.code, u.email, pu.used_at 
FROM promocode_usage pu
JOIN promocodes p ON pu.promocode_id = p.id
JOIN auth.users u ON pu.user_id = u.id
ORDER BY pu.used_at DESC;

-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å –∏—Å—Ç–µ–∫—à–∏–º–∏ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
SELECT u.email, s.ends_at 
FROM subscriptions s
JOIN auth.users u ON s.user_id = u.id
WHERE s.status = 'active' AND s.ends_at < NOW();
```

## üéØ –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏** - –∏–∑–±–µ–≥–∞–π—Ç–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
2. **–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ –¥–∞—Ç—ã –∏—Å—Ç–µ—á–µ–Ω–∏—è** - –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–π—Ç–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤
3. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
4. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã** - –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ä–∞–±–æ—Ç—É –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π
5. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã** - –≤–µ–¥–∏—Ç–µ —É—á–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∫–æ–¥–æ–≤

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç–µ–∂–∞–º–∏

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏:

–î–ª—è –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ —Ç–∏–ø–∞ `free_months` –ø–æ–¥–ø–∏—Å–∫–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ–ø–ª–∞—Ç—ã.

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å–∫–∏–¥–∫–∏:

–î–ª—è –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ —Ç–∏–ø–∞ `percentage` –∏ `fixed_amount` —Å–∫–∏–¥–∫–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π —Ü–µ–Ω–µ –ø—Ä–∏ –æ–ø–ª–∞—Ç–µ.

---

**–°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ
